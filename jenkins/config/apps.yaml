apps:
  # --------------------------------------------------------------------
  # Backend API Service
  # --------------------------------------------------------------------
  - name: backend
    type: backend
    path: apps/backend

    # Backend uses ONLY runtime configuration.
    # - No build-time arguments
    # - Environment-specific values injected via Kubernetes manifests
    # - Image remains fully environment-agnostic


  # --------------------------------------------------------------------
  # Admin Frontend Application (Next.js)
  # --------------------------------------------------------------------
  - name: frontend-admin
    type: frontend
    path: apps/frontend-admin

    # CI commands
    testCommand: npm test
    securityCommand: npm audit --audit-level=high

    # Build-time arguments (Next.js)
    # - NEXT_PUBLIC_* injected at BUILD TIME
    # - Application runs at root path (/)
    # - Domain and routing handled via Ingress (subdomain-based)
    buildArgs:
      NEXT_PUBLIC_API_BASE_URL: __API_BASE_URL__


  # --------------------------------------------------------------------
  # Customer Frontend Application (Next.js)
  # --------------------------------------------------------------------
  - name: frontend-customer
    type: frontend
    path: apps/frontend-customer

    # CI commands
    testCommand: npm test
    securityCommand: npm audit --audit-level=high

    # Build-time arguments (Next.js)
    # - No basePath usage
    # - API endpoint injected per environment
    buildArgs:
      NEXT_PUBLIC_API_BASE_URL: __API_BASE_URL__
