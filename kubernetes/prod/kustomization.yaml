# ======================================================================
# Root Kustomization for Production Environment
#
# Purpose:
# - Aggregate all production-level Kubernetes resources
# - Act as the single entry point for ArgoCD (prod application)
#
# ArgoCD points to:
# - kubernetes/prod
# - This file fully defines the production environment
# ======================================================================

apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# ----------------------------------------------------------------------
# Resources
# ----------------------------------------------------------------------
resources:
  - namespace.yaml
  - backend
  - frontend-admin
  - frontend-customer
  - ingress.yaml

# ----------------------------------------------------------------------
# Image overrides (PROD)
# Jenkins updates ONLY the tag via GitOps
# Manual approval happens before prod tag update
# ----------------------------------------------------------------------
images:
- name: docker.io/mrsharma151/framely-backend
  newName: docker.io/mrsharma151/framely-backend
  newTag: 0.1.0-ccc5c87
- name: docker.io/mrsharma151/framely-frontend-admin
  newName: docker.io/mrsharma151/framely-frontend-admin
  newTag: 0.1.0-ccc5c87
- name: docker.io/mrsharma151/framely-frontend-customer
  newName: docker.io/mrsharma151/framely-frontend-customer
  newTag: 0.1.0-ccc5c87
